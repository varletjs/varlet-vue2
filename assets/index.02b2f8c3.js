import{L as f}from"./index.dea20df7.js";import{R as h}from"./index.19abdf8c.js";import{d as m,n as p}from"./create.03b31fc7.js";import{c as _,b as v}from"./elements.2a324d45.js";import{i as g,g as x}from"./shared.f8da68a0.js";import{p as T,u as k,a as d,_ as b,b as C,c as y}from"./en-US.0b8219db.js";import{n as c}from"./index.0a9349fd.js";import{C as L}from"./index.009f9ccb.js";import{T as F,a as E}from"./index.0f41bab4.js";import{T as B}from"./index.52dd2d2d.js";import{T as $}from"./index.91042fa9.js";import{d as S}from"./index.9b1139e6.js";import{w as A,a as I}from"./utils.d774da76.js";import"./index.b82c43fb.js";import"./vendor.10bd23ac.js";import"./index.7e6c9d9a.js";import"./index.1951e852.js";import"./components.e000a0b0.js";import"./relation.9e421618.js";import"./index.cc0c92e1.js";import"./index.8e7d81d0.js";const N={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String}};var U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"listEl",staticClass:"var-list var--box"},[t._t("default"),t.loading?t._t("loading",function(){return[e("div",{staticClass:"var-list__loading"},[e("div",{staticClass:"var-list__loading-text"},[t._v(t._s(t.dt(t.loadingText,t.pack.listLoadingText)))]),e("var-loading",{attrs:{size:"mini",radius:10}})],1)]}):t._e(),t.finished?t._t("finished",function(){return[e("div",{staticClass:"var-list__finished"},[t._v(t._s(t.dt(t.finishedText,t.pack.listFinishedText)))])]}):t._e(),t.error?t._t("error",function(){return[e("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"var-list__error",on:{click:t.load}},[t._v(" "+t._s(t.dt(t.errorText,t.pack.listErrorText))+" ")])]}):t._e(),e("div",{ref:"detectorEl",staticClass:"var-list__detector"})],2)},w=[];const R=m({name:"VarList",directives:{Ripple:h},components:{VarLoading:f},props:N,data:()=>({scroller:""}),computed:{pack(){return T.value}},mounted(){this.scroller=_(this.$refs.listEl),this.immediateCheck&&this.check(),this.scroller.addEventListener("scroll",this.check)},beforeDestroy(){this.scroller.removeEventListener("scroll",this.check)},methods:{async check(){await p(),!this.loading&&!this.finished&&!this.error&&this.isReachBottom()&&this.load()},isNumber:g,dt:x,load(){var t,s,e,i,r,o;(s=(t=this.getListeners())["onUpdate:error"])==null||s.call(t,!1),(i=(e=this.getListeners())["onUpdate:loading"])==null||i.call(e,!0),(o=(r=this.getListeners()).onLoad)==null||o.call(r)},isReachBottom(){const t=this.scroller===window?window.innerHeight:this.scroller.getBoundingClientRect().bottom,{bottom:s}=this.$refs.detectorEl.getBoundingClientRect();return Math.floor(s)-v(this.offset)<=t}}}),n={};var V=c(R,U,w,!1,z,null,null,null);function z(t){for(let s in n)this[s]=n[s]}var a=function(){return V.exports}();a.install=function(t){t.component(a.name,a)};var D={basicUsage:"\u57FA\u672C\u4F7F\u7528",loadFail:"\u52A0\u8F7D\u5931\u8D25",tipText:"\u63D0\u793A\u6587\u5B57",loadingText:"\u6B63\u5728\u52AA\u529B\u8F93\u51FA",errorText:"\u51FA\u9519\u4E86\u51FA\u9519\u4E86",finishedText:"\u4E00\u6EF4\u90FD\u6CA1\u6709\u4E86",listItem:"\u5217\u8868\u9879"},M={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"};const{add:u,use:j,pack:P,packs:_t,merge:vt}=k(),Q=t=>{y(t),j(t)};d("zh-CN",b);d("en-US",C);u("zh-CN",D);u("en-US",M);var H=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"var-list-example"},[e("var-tabs",{staticStyle:{"margin-bottom":"10px"},attrs:{active:t.current,sticky:"","offset-top":"54px"},on:{"update:active":function(i){t.current=i}}},[e("var-tab",[t._v(t._s(t.pack.basicUsage))]),e("var-tab",[t._v(t._s(t.pack.loadFail))]),e("var-tab",[t._v(t._s(t.pack.tipText))])],1),e("var-tabs-items",{attrs:{active:t.current},on:{"update:active":function(i){t.current=i}}},[e("var-tab-item",[e("var-list",{attrs:{finished:t.finished,loading:t.loading},on:{"update:loading":function(i){t.loading=i},load:t.load}},t._l(t.list,function(i){return e("var-cell",{key:i},[t._v(" "+t._s(t.pack.listItem)+": "+t._s(i)+" ")])}),1)],1),e("var-tab-item",[e("var-list",{attrs:{finished:t.finished2,error:t.error,loading:t.loading2},on:{"update:error":function(i){t.error=i},"update:loading":function(i){t.loading2=i},load:t.load2}},t._l(t.list2,function(i){return e("var-cell",{key:i},[t._v(" "+t._s(t.pack.listItem)+": "+t._s(i)+" ")])}),1)],1),e("var-tab-item",[e("var-list",{attrs:{"loading-text":t.pack.loadingText,"finished-text":t.pack.finishedText,"error-text":t.pack.errorText,finished:t.finished3,loading:t.loading3},on:{"update:loading":function(i){t.loading3=i},load:t.load3}},t._l(t.list3,function(i){return e("var-cell",{key:i},[t._v(" "+t._s(t.pack.listItem)+": "+t._s(i)+" ")])}),1)],1)],1)],1)},O=[];const Z={name:"ListExample",components:{VarList:a,VarCell:L,VarTabs:F,VarTab:E,VarTabsItems:B,VarTabItem:$},data:()=>({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0}),computed:{pack(){return P.value}},created(){A(this,Q),I(this,S)},methods:{load(){if(this.current!==0){this.loading=!1;return}setTimeout(()=>{for(let t=0;t<20;t++)this.list.push(this.list.length+1);this.loading=!1,this.list.length>=60&&(this.finished=!0)},1e3)},load2(){if(this.current!==1){this.loading2=!1;return}setTimeout(()=>{if(this.list2.length===40){this.error=!0,this.loading2=!1;return}for(let t=0;t<20;t++)this.list2.push(this.list2.length+1);this.loading2=!1},1e3)},load3(){if(this.current!==2){this.loading3=!1;return}setTimeout(()=>{for(let t=0;t<20;t++)this.list3.push(this.list3.length+1);this.loading3=!1,this.list3.length>=60&&(this.finished3=!0)},1e3)}}},l={};var q=c(Z,H,O,!1,G,null,null,null);function G(t){for(let s in l)this[s]=l[s]}var gt=function(){return q.exports}();export{gt as default};
