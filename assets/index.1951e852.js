import{b as h,f as p,c as u}from"./elements.2a324d45.js";import{t as x}from"./shared.f8da68a0.js";import{d as m}from"./create.03b31fc7.js";import{n as v}from"./index.0a9349fd.js";const _={offsetTop:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:10},cssMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onScroll:{type:Function}};var S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"stickyEl",staticClass:"var-sticky",class:[e.enableCSSMode?"var-sticky--css-mode":null],style:{zIndex:e.toNumber(e.zIndex),top:e.enableCSSMode?e.localOffsetTop+"px":void 0,width:e.enableFixedMode?e.fixedWidth:void 0,height:e.enableFixedMode?e.fixedHeight:void 0}},[i("div",{ref:"wrapperEl",staticClass:"var-sticky__wrapper",style:{zIndex:e.toNumber(e.zIndex),position:e.enableFixedMode?"fixed":void 0,width:e.enableFixedMode?e.fixedWrapperWidth:void 0,height:e.enableFixedMode?e.fixedWrapperHeight:void 0,left:e.enableFixedMode?e.fixedLeft:void 0,top:e.enableFixedMode?e.fixedTop:void 0}},[e._t("default")],2)])},b=[];const y=m({name:"VarSticky",props:_,data:()=>({isFixed:!1,fixedTop:"0px",fixedLeft:"0px",fixedWidth:"auto",fixedHeight:"auto",fixedWrapperWidth:"auto",fixedWrapperHeight:"auto",scroller:void 0}),computed:{enableCSSMode(){return!this.disabled&&this.cssMode},enableFixedMode(){return!this.disabled&&this.isFixed},localOffsetTop(){return h(this.offsetTop)}},activated(){this.addScrollListener()},deactivated(){this.removeScrollListener()},mounted(){this.addScrollListener()},beforeDestroy(){this.removeScrollListener()},watch:{disabled(){this.handleScroll()}},methods:{toNumber:x,handleScroll(){const{onScroll:e,cssMode:t,disabled:i}=this;if(i)return;let s=0;if(this.scroller!==window){const{top:c}=this.scroller.getBoundingClientRect();s=c}const l=this.$refs.wrapperEl,o=this.$refs.stickyEl,{top:a,left:f}=o.getBoundingClientRect(),r=a-s;r<=this.localOffsetTop?(t||(this.fixedWidth=`${o.offsetWidth}px`,this.fixedHeight=`${o.offsetHeight}px`,this.fixedTop=`${s+this.localOffsetTop}px`,this.fixedLeft=`${f}px`,this.fixedWrapperWidth=`${l.offsetWidth}px`,this.fixedWrapperHeight=`${l.offsetHeight}px`,this.isFixed=!0),e==null||e(this.localOffsetTop,!0)):(this.isFixed=!1,e==null||e(r,!1))},async addScrollListener(){await p(),this.scroller=u(this.$refs.stickyEl),this.scroller!==window&&this.scroller.addEventListener("scroll",this.handleScroll),window.addEventListener("scroll",this.handleScroll),this.handleScroll()},removeScrollListener(){this.scroller!==window&&this.scroller.removeEventListener("scroll",this.handleScroll),window.removeEventListener("scroll",this.handleScroll)}}}),n={};var g=v(y,S,b,!1,w,null,null,null);function w(e){for(let t in n)this[t]=n[t]}var d=function(){return g.exports}();d.install=function(e){e.component(d.name,d)};export{d as S,_ as p};
