import{I as p}from"./index.7e6c9d9a.js";import{V as h,F as y}from"./validation.7606bf3f.js";import{R as g}from"./index.19abdf8c.js";import{d as v}from"./create.03b31fc7.js";import{t as d}from"./elements.2a324d45.js";import{t as i}from"./shared.f8da68a0.js";import{c as _}from"./relation.9e421618.js";import{n as b}from"./index.0a9349fd.js";const C={value:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number],default:"24"},gap:{type:[String,Number],default:"2"},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onChange"]},rules:{type:Array},onChange:{type:Function},onInput:{type:Function}};var S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"var-rate__warp"},[r("div",{staticClass:"var-rate"},e._l(e.toNumber(e.count),function(a){return r("div",{directives:[{name:"ripple",rawName:"v-ripple",value:{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple},expression:"{ disabled: formReadonly || readonly || formDisabled || disabled || !ripple }"}],key:a,class:e.getClass(a),style:e.getStyle(a),on:{click:function(o){return e.handleClick(a,o)}}},[r("var-icon",{style:{fontSize:e.toSizeUnit(e.size)},attrs:{transition:0,name:e.getIconName(a)}})],1)}),0),r("var-form-details",{attrs:{"error-message":e.errorMessage}})],1)},R=[];const V=v({name:"VarRate",inheritAttrs:!1,mixins:[h,_("form",{parentKey:"form",childrenKey:"formItems"})],components:{VarIcon:p,VarFormDetails:y},directives:{Ripple:g},props:C,computed:{formDisabled(){var e;return(e=this.form)==null?void 0:e.disabled},formReadonly(){var e;return(e=this.form)==null?void 0:e.readonly}},methods:{toNumber:i,toSizeUnit:d,getStyle(e){const{count:t,size:r,gap:a}=this;return{color:this.transformValue(e).color,marginRight:e!==i(t)?d(a):0,width:d(r),height:d(r),borderRadius:"50%"}},getClass(e){var a;const{type:t,color:r}=this.transformValue(e);return{"var-rate__content":!0,"var-rate--disabled":(a=this.form)==null?void 0:a.disabled,"var-rate--error":this.errorMessage,"var-rate--primary":t!=="empty"&&!r}},getIconName(e){const{type:t}=this.transformValue(e),{icon:r,halfIcon:a,emptyIcon:o}=this;return t==="full"?r:t==="half"?a:o},changeValue(e,t){if(this.half){const{offsetWidth:a}=t.target;t.offsetX<=Math.floor(a/2)&&(e-=.5)}const{onInput:r}=this.getListeners();r==null||r(e)},validate(){this._validate(this.rules,i(this.value))},validateWithTrigger(e){this.$nextTick(()=>{const{validateTrigger:t,rules:r,value:a}=this;this._validateWithTrigger(t,e,r,a)})},handleClick(e,t){var s,n;const{readonly:r,disabled:a}=this,{onChange:o}=this.getListeners();r||a||((s=this.form)==null?void 0:s.disabled)||((n=this.form)==null?void 0:n.readonly)||(this.changeValue(e,t),o==null||o(e),this.validateWithTrigger("onChange"))},reset(){var e,t;(t=(e=this.getListeners()).onInput)==null||t.call(e,0),this.resetValidation()},transformValue(e){var c,m;const{value:t,disabled:r,disabledColor:a,color:o,half:s,emptyColor:n}=this;let l;return r||((c=this.form)==null?void 0:c.disabled)?l=a:o&&(l=o),e<=i(t)?{type:"full",score:e,color:l}:s&&e<=i(t)+.5?{type:"half",score:e,color:l}:{type:"empty",score:e,color:r||((m=this.form)==null?void 0:m.disabled)?a:n}}}}),u={};var I=b(V,S,R,!1,N,null,null,null);function N(e){for(let t in u)this[t]=u[t]}var f=function(){return I.exports}();f.install=function(e){e.component(f.name,f)};export{f as R};
